apiVersion: v1
kind: Pod
metadata:
  name: nginx
  annotations:
{{ if option "monitor annotations" }}
    co.elastic.monitor/check.response.status.0: "307"
    co.elastic.monitor/check.response.status.1: "200"
    co.elastic.monitor/id: nginx-uptime-id
    co.elastic.monitor/name: nginx-uptime
    co.elastic.monitor/schedule: '@every 1s'
    co.elastic.monitor/type: http
    co.elastic.monitor/urls: http://${data.host}
{{ end }}
  labels:
    k8s-app: nginx
    app: nginx
spec:
  containers:
  - image: nginx
    imagePullPolicy: IfNotPresent
    name: redis
    ports:
    - name: http
      containerPort: 80
      protocol: TCP
